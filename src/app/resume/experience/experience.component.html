<div [formGroup]="resumeForm">
    <mat-card>
        <mat-card-header>
            <div mat-card-avatar><mat-icon>rowing</mat-icon></div>
            <mat-card-title>Experience</mat-card-title>
            <mat-card-subtitle>Talk about your experiences, specific tasks in your previous jobs</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <div formArrayName="experiencesList">
    
                <div *ngFor="let experience of experiencesList.controls; let i = index" formGroupName="{{i}}">
                    <mat-card class="resume-content-card">

                        <mat-card-header>
                            <mat-card-title class="resume-card-title">
                                <mat-form-field appearance="standard">
                                    <mat-label for="experienceTitle">Experience title</mat-label>
                                    <input matInput type="text" formControlName="experienceTitle" placeholder="Ex. Dirigeant Marketing">
                                </mat-form-field>
                            </mat-card-title>
                        </mat-card-header>

                        <mat-card-content>
                            <div class=row>
                                <mat-form-field appearance="outline" class="col-4">
                                    <mat-label for="startDate">Start date</mat-label>
                                    <input matInput [matDatepicker]="experienceStartDatePicker" type="text" formControlName="startDate" placeholder="Choose a start date">
                                    <mat-datepicker-toggle matSuffix [for]="experienceStartDatePicker"></mat-datepicker-toggle>
                                    <mat-datepicker #experienceStartDatePicker></mat-datepicker>
                                </mat-form-field>
                                <mat-form-field appearance="outline" class="col-4">
                                    <mat-label for="endDate">End date</mat-label>
                                    <input matInput [matDatepicker]="experienceEndDatePicker" type="text" formControlName="endDate" placeholder="Choose an end date">
                                    <mat-datepicker-toggle matSuffix [for]="experienceEndDatePicker"></mat-datepicker-toggle>
                                    <mat-datepicker #experienceEndDatePicker></mat-datepicker>
                                </mat-form-field>
                            </div>
                            
                            <div class="row">
                                <div class="col-6">
                                    <mat-form-field appearance="standard">
                                        <mat-label for="workPlace">Work place</mat-label>
                                        <input matInput type="text" formControlName="workPlace" placeholder="Ex. Carrefour">
                                    </mat-form-field>
                                    <mat-form-field appearance="standard">
                                        <mat-label for="workPlaceDescription">Work place description</mat-label>
                                        <textarea matInput type="text" formControlName="workPlaceDescription" placeholder="Ex. Groupe français de grande distribution"></textarea>
                                    </mat-form-field>
                                </div>
                                    <mat-form-field appearance="standard" class="col-6">
                                        <mat-label for="workAddress">Work address</mat-label>
                                        <input matInput type="text" formControlName="workAddress" placeholder="Ex. 54 Allée des Espadons">
                                    </mat-form-field>
                            </div> 
        
                            <div formArrayName="items">
                                <ul>
                                    <div *ngFor="let experienceItem of getExperienceItemList(i).controls; let j = index">
                                        <li>
                                            <div class="row">
                                                <div class="col-10">
                                                    <input matInput type="text" formControlName="{{j}}" placeholder="Ex. Rangement de rayon">
                                                </div>
                                                <div class="col-1">
                                                    <button type="button" mat-icon-button color="primary" (click)="callParentItemRemoved(['experiencesList', i, j])"><mat-icon>clear</mat-icon></button>
                                                </div>
                                            </div>
                                        </li>
                                    </div>
                                </ul>
                                <button type="button" mat-stroked-button color="primary" (click)="callParentItemAdded(['experiencesList',i, item])">Add item</button>
                            </div>
                        </mat-card-content>

                        <mat-card-footer>
                            <button mat-icon-button color="primary" (click)="removeExperience(i)"><mat-icon>delete</mat-icon></button>
                        </mat-card-footer>
                    </mat-card>
                    
                </div>
                
            </div>
            <button type="button" mat-raised-button color="primary" (click)="addInputExperience()"><mat-icon>add_circle</mat-icon></button>
        </mat-card-content>
    </mat-card>
</div>